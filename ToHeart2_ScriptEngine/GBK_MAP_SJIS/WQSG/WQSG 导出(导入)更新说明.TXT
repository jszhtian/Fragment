/*///////////////////////////////////
//软件名称：WQSG 导出(导入)
//
//本程序核心基于VC++,界面基于MFC,VS2008编译通过,XPSP2正常运行
//主要功能:
//	1.支持1-255字节的码表,支持批量
//	2.原生支持UNICODE
//	3.导文本速度 = 硬盘读写速度
/	4.文本与码表支持注释(用//开头)
//	4.可以批量替换文本
//	5.附带码表工具
//	6.附带WIPS补丁工具(支持4G以上文件)
//	7.附带差值搜索功能
///////////////////////////////////*/



/*////////////////////////////////////
--------------------------
以前的更新记录省略...(我也忘了)
--------------------------2006-?-?
*改用VC++重新写的软件,速度明显上升几百几千倍
--------------------------2006-10-25
*修正了导入时候的一些问题
--------------------------2006-10-26
*修正了内存泄露的问题,优化了部分代码
--------------------------2006-10-27
*继续优化了部分代码
--------------------------2006-11-12
*结构进行了调整
*加入了批处理导出功能
--------------------------2006-11-16
*继续完善了批量导出功能
--------------------------2006-11-19
*添加了码表工具,可以统计文本里文字的出现频率,以及生成码表
--------------------------2006-11-29
*改进控制码表OVER(结束符),允许截断后跳过x字节之后再继续导出,
并且不再导出到文本(导出反而麻烦),以前的文本有的{结束符xx},导入不受影响
--------------------------2006-12-03
*支持文本单行注释,在单独一行 以"//"(不含引号)开头的,即为注释,不参加导入
*码表工具增加多文档同时统计
--------------------------2006-12-18
*添加WIPS补丁程序3.0版本,最大支持2^63次方字节的文件
*导出工具添加对4GB以上的文件支持,按照分段,每段4GB....,
也就是0xAAAAAAAABBBBBBBB,AA部分做为共同段号,
范围是BB的0x0 - 0xFFFFFFFF 的4GB范围,
同样最大支持2^63次方字节的文件,
导出的文本0段跟以往的没任何区别,
1段开始就在文本最前面自动加".WQSG:AAAAAAAA"(不含引号,AA为前面的段号)
* 导入时就验证第一行是否有".WQSG:AAAAAAAA"(不含引号)
--------------------------2006-12-27
*导出文本添加探测最大导出地址
*批量导出的耍赖不工作修正
*码表工具 添加按照编码表生成,编码表的格式跟破同码表一样,等号右边可有可无,
比如,待编码的字有ABC,编码表为:
0001=X
0500=
F201=
编码后就是
0001=A
0500=B
F201=C
编码不够就中断,字不够就无视后面的编码
--------------------------2006-12-27(1)
*修正了导出导入只能工作一次的BUG
--------------------------2006-12-27(2)
*修正了导入时一个提示错误
--------------------------2006-12-29
*修正了少数几处不够人性化的地方
*修正了生成码表验证的错误
--------------------------2007-01-02
*开放指针模式测试(目前只支持 地址 + 结束符的导出模式)
*修正利用 编码表 制作码表为乱码的bug(感谢zxp的bug报告)
*支持不会过滤 行首半角空格的bug(感谢zxp的bug报告)
--------------------------2007-01-03
*修正无论是否选择 "检测码表重复"都会检测的bug(再次感谢zxp的bug报告)
--------------------------2007-01-07
*修正指针导出的一个耍赖不工作的BUG（感谢林拓）
--------------------------2007-01-08
*加强了软件自身的安全性
*修改了界面的一些词语
*添加了一个工具的简易使用说明,还添加了自己瞎编两个文本规范说明
--------------------------2007-01-26
*修正制作补丁的bug
*修正指针导出 跳跃符的bug
*其他改进忘了
--------------------------2007-02-09
*制作补丁 添加制作EXE功能
*批量导出不好用,暂时屏蔽了,等下一版吧
--------------------------2007-02-18
*更改了某界面
*修正快速索引不能用中文的问题,不过对以前的索引列表会有空行,直接删除就行了(感谢yeyezai)
*修正普通导入时,自动填充无法输入在小写字母状态输入的问题(感谢yeyezai)
*修正了指针导出信息头错误的BUG,以前导出的,请重新导出,然后用新的信息头替换老的信息头即可
*添加了指针导入(偏移+结束符模式)
*祝大家春节快乐
--------------------------2007-03-04
*添加指针文本的"重复符",作用为简化多处指向同一指针的文本
--------------------------2007-03-11
*修正制作补丁，非EXE生成错误的bug
*修正制作补丁时，新文件比原文件大时候的死循环bug
*修正制作exe补丁时，不显示说明的bug（感谢Snow_Young）
--------------------------2007-05-10
*添加批量文本替换功能
*某窗口适当修正(如加图标)
--------------------------2007-07-24
*某些被遗忘的更新
*修正导入时某超长控制符的支持失败
--------------------------2007-09-03
*总版本号更新为1.1
*听取了许多汉化者的意见建议,以及参考了<蓝山魔导>,重写了界面,使其更人性化
*导文本加入批量功能
*配置文件从..\DATA\WQSG 导出(导入)\改为本目录,并使用了XML文档
*暂时屏蔽指针模式,等有时间写界面后开放
--------------------------2007-09-04
*修正XML解析库版本兼容性问题，现在可以运行了
--------------------------2007-09-06
*强化文本替换功能(pluto的建议)
--------------------------2007-09-07
*修正文本只能替换第一个文件的bug
--------------------------2007-09-15
*修正导入时，混合填充的bug(感谢Joyce(这可是难的的破解MM))
--------------------------2007-09-19
*加入了差值搜索功能(真怀念)
--------------------------2007-09-21
*加入四字节差值搜索功能
--------------------------2007-09-26
*添加导指针文本的界面(未完成)
*紧急修正补丁制作的bug,满足特定条件将触发此bug,生成错误补丁(感谢pluto报告)
*优化制作补丁内核
--------------------------2007-09-29
*忘了什么更新...
*暂时去掉指针文本界面,等实际写完再添加
--------------------------2007-10-16
*支持UTF-8编码的文本
--------------------------2007-11-07
*修正一个潜在的导出文本bug
比如定义了:
11221133=1
1122=2
导出时遇到 11 22 11 44 就会错认为找不到而当成未定义的编码,实际应该是 11 22
--------------------------2007-11-18
*修正一个内存溢出bug(感谢bluekiller)
*修正了配置方案不工作的bug
--------------------------2008-01-13
*修正IPSexe模式,设置文件长度错误的bug
*文本导出模式,将开始地址和结束地址设为默认值
*修正文本导入时的打开文本失败,却提示打开rom失败的bug
*修正最简单批量替换不工作的bug
*修正IPSexe模式,初始化失败的bug
--------------------------2008-01-15
*添加文本直接导出到rom同一目录模式,默认打开
--------------------------2008-01-16
*目录模式,添加导出子目录
--------------------------2008-03-06
*本版本开始改为VS2008编译
*修正 字符编码未定义提示时,显示带乱码的问题(感谢Joyce)
--------------------------2008-08-10
*将遇到错误就弹出对话框改为输出log,以满足某些苛刻条件下的需求
--------------------------2009-02-04
*添加新控制符"end:",效果跟over差不多,不过会将文本导出之后再截断,用法如下
码表:
0003=.
控制码表
0003=end:
--------------------------2009-02-08
*添加关于软件页面
*添加命令行模式,详情请在命令行模式附加/?参数查询,不加任何参数为启动GUI模式
--------------------------2009-02-28
*修正特定情况下,导出可能少字的bug(感谢DNAsdw)
--------------------------2009-04-22
*修正NT6.0(vista,win2008等)下,重复打开文件框崩溃的bug(真是一个莫名其妙的系统)(感谢Pluto)
--------------------------2009-04-25
*修正NT6.0之前的系统下(如XP),选择文件崩溃的bug(vista和xp还真干上了..)(感谢bluekiller)
--------------------------2009-06-05
*修正导入模式,加载码表不会识别注释符号的bug(感谢qqj1228)
--------------------------2009-09-12
*修正在NT6.x系统下的一些bug
--------------------------2009-11-05
*应avan要求,将导出范围从9999扩大到99999
*应某没留名的朋友,在码表统计中加入了按字频排列的功能
--------------------------2012-10-10
*修正保存配置文件会挂的bug
*修正导出文件时会宕的一个bug
*改用tinyxml
*修正导出高位地址时失败的bug(感谢wewewef)
*一些优化（我自己都忘改了什么）
--------------------------2012-12-07
*修正文件夹模式,只有一个扩展名,没有填分号结尾是死循环的bug(感谢wewewef)


////////////////////////////////////*/
/*
感谢elffinal老大对导出部分优化的技术支持
*/